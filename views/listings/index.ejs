<% layout('/layouts/boilerplate') -%>

  <div class="max-w-7xl mx-auto px-4 py-6  ">
    <h3 class="text-2xl font-semibold mb-6">All listings</h3>

    <!-- GRID: 1 column on small, 3 on md, 4 on lg -->
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 justify-center">
      <% for (const listing of allListings) { %>
        <article class="bg-white rounded-lg shadow-md overflow-hidden flex flex-col">
          <!-- image: full width, fixed height, object-cover -->
          <img
            src="<%= listing.image.url %>"
            alt="<%= listing.title %>"
            class="w-full h-44 md:h-48 lg:h-56 object-cover"
            loading="lazy"
          />

          <div class="p-4 flex-1 flex flex-col">
            <a href="/listings/<%= listing._id %>" class="group">
              <h4 class="text-lg font-bold text-slate-900 group-hover:underline mb-1">
                <%= listing.title %>
              </h4>
            </a>

            <p class="text-sm text-slate-500 mb-2">
              <%= listing.location %>, <%= listing.country %>
            </p>

            <p class="text-sm text-slate-600 mb-4 line-clamp-3">
              <%= listing.description %>
            </p>

            <div class="mt-auto flex items-center justify-between">
              <p class="font-semibold text-slate-800">&#8377;<%= listing.price.toLocaleString('en-IN') %></p>

              <a
                href="/listings/<%= listing._id %>"
                class="inline-flex items-center text-sm font-medium px-3 py-2 border rounded-md border-slate-200 hover:bg-slate-100"
              >
                Detail
                <svg class="w-4 h-4 ms-1 -me-0.5 ml-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 12H5m14 0-4 4m4-4-4-4"/>
                </svg>
              </a>
            </div>
          </div>
        </article>
      <% } %>
    </div>
  </div>

