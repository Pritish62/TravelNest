<form action="/listings" method="GET" class="w-full max-w-5xl mx-auto bg-white  rounded-md ring-2 ring-amber-300 overflow-visible">
  <div class=" grid grid-cols-1 md:grid-cols-5 gap-4 items-center relative">
    <!-- 1) City / Destination -->
    <div class="col-span-1 md:col-span-1">
      <label class="relative block">
        <span class="sr-only">Destination</span>
        <div class="flex items-center gap-3 px-3 py-2 border rounded-lg focus-within:ring-2 focus-within:ring-amber-400">
          <!-- left bed icon -->
          <svg class="w-6 h-6 text-slate-600" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <path d="M3 12v6h2v-4h14v4h2v-6a3 3 0 0 0-3-3H6a3 3 0 0 0-3 3z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M7 9a3 3 0 1 1 6 0" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>

          <input
            id="city-input"
            name="city"
            type="text"
            placeholder="Where are you going?"
            class="w-full text-sm placeholder-slate-500 outline-none bg-transparent"
            aria-label="Destination"
          />

          <!-- clear (cross) button: clears only the city input -->
          <button
            type="button"
            title="Clear"
            class="inline-flex items-center justify-center p-1 rounded text-slate-400 hover:text-slate-700"
            onclick="document.getElementById('city-input').value=''; document.getElementById('city-input').focus();"
          >
            <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M6 6l12 12M6 18L18 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
        </div>
      </label>
    </div>

    <!-- 2) Dates (unchanged) -->
    <div class="col-span-2 md:col-span-2 px-5">
      <label class="block">
        <span class="sr-only">Dates</span>
        <div class="flex items-center gap-3 px-2 py-2 border rounded-lg focus-within:ring-2 focus-within:ring-amber-400">
          <svg class="w-6 h-6 text-slate-600" viewBox="0 0 24 24" fill="none"><path d="M8 2v2M16 2v2M3 8h18M21 21H3V8h18v13z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>

          <div class="flex flex-col">
            <label class="text-[11px] text-slate-400">Check-in</label>
            <input type="date"  class="text-sm outline-none bg-transparent" aria-label="Check-in date" />
          </div>

          <div class="text-slate-300 text-lg">—</div>

          <div class="flex flex-col">
            <label class="text-[11px] text-slate-400">Check-out</label>
            <input type="date"  class="text-sm outline-none bg-transparent" aria-label="Check-out date" />
          </div>
        </div>
      </label>
    </div>

    <!-- 3) Guests / Rooms (summary + popup) -->
    <div class="col-span-1 md:col-span-1 relative">
      <label class="block">
        <span class="sr-only">Guests and rooms</span>

        <!-- visible summary row -->
        <div class="flex items-center justify-between px-3 py-2 border rounded-lg focus-within:ring-2 focus-within:ring-amber-400">
          <div class="flex items-center gap-3">
            <!-- person icon -->
            <svg class="w-6 h-6 text-slate-600" viewBox="0 0 24 24" fill="none"><path d="M12 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM6 20a6 6 0 0 1 12 0" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>

            <div class="text-sm leading-tight">
              <!-- summary text updates via inline onchange handlers on inputs below -->
              <div id="summary-text" class="font-medium">2 adults · 0 children · 1 room</div>
            </div>
          </div>

          <!-- arrow toggles popup -->
          <button
            type="button"
            id="guest-toggle"
            aria-expanded="false"
            title="Open guest selector"
            class="inline-flex items-center justify-center"
            onclick="const p=document.getElementById('guest-popup'); p.classList.toggle('hidden'); this.setAttribute('aria-expanded', String(!p.classList.contains('hidden')));"
          >
            <svg class="w-5 h-5 text-slate-600" viewBox="0 0 24 24" fill="none"><path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
          </button>
        </div>
      </label>

      <!-- popup: initially hidden; will appear below the summary when arrow clicked -->
      <div id="guest-popup" class="hidden absolute left-0 top-full mt-2 w-[320px] bg-white border rounded-xl shadow-lg p-4 z-50">
        <!-- Adults -->
        <div class="flex items-center justify-between py-2">
          <div>
            <div class="text-sm font-medium">Adults</div>
            <div class="text-xs text-slate-400">Ages 18+</div>
          </div>
          <input
            id="adults"
           
            type="number"
            min="1"
            max="50"
            value="2"
            class="w-20 text-center border rounded-md py-1"
            aria-label="Number of adults"
            onchange="document.getElementById('summary-text').textContent = document.getElementById('adults').value + ' adults · ' + document.getElementById('children').value + ' children · ' + document.getElementById('rooms').value + ' room';"
            oninput="this.value = Math.max(1, Math.min(50, Number(this.value || 0)));"
          />
        </div>

        <!-- Children -->
        <div class="flex items-center justify-between py-2">
          <div>
            <div class="text-sm font-medium">Children</div>
            <div class="text-xs text-slate-400">Ages 0–17</div>
          </div>
          <input
            id="children"
            
            type="number"
            min="0"
            max="20"
            value="0"
            class="w-20 text-center border rounded-md py-1"
            aria-label="Number of children"
            onchange="document.getElementById('summary-text').textContent = document.getElementById('adults').value + ' adults · ' + document.getElementById('children').value + ' children · ' + document.getElementById('rooms').value + ' room';"
            oninput="this.value = Math.max(0, Math.min(20, Number(this.value || 0)));"
          />
        </div>

        <!-- Rooms -->
        <div class="flex items-center justify-between py-2">
          <div>
            <div class="text-sm font-medium">Rooms</div>
            <div class="text-xs text-slate-400">Number of rooms</div>
          </div>
          <input
            id="rooms"
           
            type="number"
            min="1"
            max="40"
            value="1"
            class="w-20 text-center border rounded-md py-1"
            aria-label="Number of rooms"
            onchange="document.getElementById('summary-text').textContent = document.getElementById('adults').value + ' adults · ' + document.getElementById('children').value + ' children · ' + document.getElementById('rooms').value + ' room';"
            oninput="this.value = Math.max(1, Math.min(40, Number(this.value || 0)));"
          />
        </div>

        <!-- Done button to close popup -->
        <div class="mt-3">
          <button
            type="button"
            class="w-full py-2 rounded-lg border text-sm"
            onclick="document.getElementById('guest-popup').classList.add('hidden'); document.getElementById('guest-toggle').setAttribute('aria-expanded','false');"
          >
            Done
          </button>
        </div>
      </div>
    </div>

    <!-- 4) Search Button -->
    <div class="col-span-1 md:col-span-1">
      <button
        type="submit"
        class="w-full md:w-auto bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg shadow"
        aria-label="Search"
      >
        Search
      </button>
    </div>
  </div>
</form>