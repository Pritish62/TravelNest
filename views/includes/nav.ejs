<nav class="bg-clr  w-full z-20 top-0 left-0 border-b border-default">
  <div class="max-w-screen-xl mx-auto px-4 relative h-24 flex items-center">
    <!-- LEFT: logo + inline nav (nav becomes visible on md+) -->
    <div class="flex items-center gap-6">
      <!-- LOGO (left on all screens) -->
      <a href="/listings" class="flex items-center">
        <img src="/logo.png" class="h-8" alt="Travelnest Logo">
      </a>

      <!-- Desktop nav links: visible from md and placed immediately right of logo -->
      <ul class="hidden md:flex items-center gap-6 whitespace-nowrap">
        <li><a href="/listings" class="py-2 px-3 text-white font-medium hover:opacity-90">Home</a></li>
        
      </ul>
    </div>
     <% if (!isHome) { %>
    <div id="nav-search">
          <%- include('../includes/searchBar.ejs') %>
    </div>
  <% } %>

    <!-- RIGHT: auth buttons on desktop -->
    <div class="ml-auto hidden md:flex items-center gap-4">
      <div class="px-3 py-2 bg-natural border-radius rounded-sm text-sm font-semibold text-white hover:bg-[#1d4d96]"><a href="/listings/new" class="py-2 px-3 text-white font-medium hover:opacity-90">List your property</a></div>
      <% if (!currUser) { %>
        <a href="/signup" class="px-3 py-2 bg-white border-radius rounded-sm text-sm font-semibold text-[#003B95] hover:bg-[#eeedff]">Sign Up</a>
        <a href="/login"  class="px-4 py-2 bg-white border-radius rounded-sm text-sm font-semibold text-[#003B95]  hover:bg-[#eeedff] transition">Login</a>
      <% } else { %>
        <span class="text-sm font-medium text-white/80 mr-2 hidden md:inline">Hello, <%= currUser.username %></span>
        <a href="/logout" class="px-4 py-2 text-sm font-semibold text-white bg-brand rounded-base hover:bg-neutral-tertiary transition">Logout</a>
      <% } %>
    </div>

    <!-- BURGER: visible only on small screens, placed at right -->
    <div class="ml-auto md:hidden">
      <button id="nav-toggle" aria-controls="mobile-menu" aria-expanded="false"
        class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm rounded-base hover:bg-neutral-secondary-soft focus:outline-none focus:ring-2 focus:ring-neutral-tertiary">
        <span class="sr-only">Open main menu</span>
        <svg id="nav-icon" class="w-6 h-6 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" aria-hidden="true">
          <path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5 7h14M5 12h14M5 17h14" />
        </svg>
      </button>
    </div>
  </div>

  <!-- MOBILE MENU: stacked links + auth (appears under the header on small screens) -->
  <div id="mobile-menu" class="hidden md:hidden bg-clr border-t border-default">
    <div class="px-4 pt-3 pb-4 space-y-3">
      <!-- links -->
      <a href="/" class="block py-2 px-3 text-white font-medium rounded hover:bg-neutral-secondary-soft">Home</a>
      <a href="/listings" class="block py-2 px-3 text-white font-medium rounded hover:bg-neutral-secondary-soft">All Listings</a>
      <a href="/listings/new" class="block py-2 px-3 text-white font-medium rounded hover:bg-neutral-secondary-soft">Add New Listing</a>

      <!-- divider -->
      <div class="border-t border-default my-1"></div>

      <!-- auth actions (stacked full width on mobile) -->
      <% if (!currUser) { %>
        <a href="/signup" class="block w-full text-center py-2 px-3 text-white font-semibold bg-brand rounded-base hover:bg-neutral-tertiary transition">Sign Up</a>
        <a href="/login"  class="block w-full text-center py-2 px-3 text-white font-semibold bg-brand rounded-base hover:bg-neutral-tertiary transition">Login</a>
      <% } else { %>
        <div class="px-1">
          <span class="block py-2 text-white/80">Hello, <%= currUser.username %></span>
          <a href="/logout" class="block w-full text-center py-2 px-3 text-white font-semibold bg-brand rounded-base hover:bg-neutral-tertiary transition">Logout</a>
        </div>
      <% } %>
    </div>
  </div>
</nav>

<!-- Small script: toggle mobile menu and swap icon -->
<script>
  (function () {
    const toggle = document.getElementById('nav-toggle');
    const mobileMenu = document.getElementById('mobile-menu');
    const navIcon = document.getElementById('nav-icon');

    if (!toggle || !mobileMenu || !navIcon) return;

    toggle.addEventListener('click', () => {
      const open = mobileMenu.classList.toggle('hidden') === false;
      toggle.setAttribute('aria-expanded', open ? 'true' : 'false');
      if (open) {
        navIcon.innerHTML = '<path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>';
      } else {
        navIcon.innerHTML = '<path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5 7h14M5 12h14M5 17h14"/>';
      }
    });

    // keep layout consistent on resize:
    window.addEventListener('resize', () => {
      if (window.innerWidth >= 768) {
        // ensure mobile menu is hidden when switching to desktop
        mobileMenu.classList.add('hidden');
        toggle.setAttribute('aria-expanded', 'false');
        navIcon.innerHTML = '<path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5 7h14M5 12h14M5 17h14"/>';
      }
    });
  })();
</script>
